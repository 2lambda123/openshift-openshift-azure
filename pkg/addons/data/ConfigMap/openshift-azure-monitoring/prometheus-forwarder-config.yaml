apiVersion: v1
data:
  config.yaml: |  
    rule_files:
    - '*.rules'
    scrape_configs:
    - job_name: cluster-prometheus
      scrape_interval: 30s
      bearer_token_file: "/run/secrets/kubernetes.io/serviceaccount/token"
      scheme: https
      tls_config:
        ca_file: "/config/ca.crt"
      params:
        'match[]':
          - '{__name__=~".+"}'
    
      honor_labels: true
      metrics_path: /federate
    
      static_configs:
      - targets:
        - "prometheus-k8s.openshift-monitoring.svc:9091"

    remote_write:
      - url: http://prom-mdm-converter/receive
kind: ConfigMap
metadata:
  name: prometheus-forwarder-config
  namespace: openshift-azure-monitoring
