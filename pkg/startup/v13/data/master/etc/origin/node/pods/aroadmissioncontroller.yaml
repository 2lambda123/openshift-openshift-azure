apiVersion: v1
kind: Pod
metadata:
  annotations:
    scheduler.alpha.kubernetes.io/critical-pod: ""
  labels:
    openshift.io/component: aro-admission-controller
    openshift.io/control-plane: "true"
  name: aro-admission-controller
  namespace: kube-system
spec:
  containers:
    - args:
      - admissioncontroller
      command:
      - azure
      image: {{ .Config.Images.AroAdmissionController | quote }}
      imagePullPolicy: Always
      livenessProbe:
        httpGet:
          path: healthz
          port: 8443
          scheme: HTTPS
        initialDelaySeconds: 45
        timeoutSeconds: 10
      name: aro-admission-controller
      readinessProbe:
        httpGet:
          path: healthz/ready
          port: 8443
          scheme: HTTPS
        initialDelaySeconds: 10
        timeoutSeconds: 10
      securityContext:
        privileged: true
      volumeMounts:
        - mountPath: /etc/aro-admission-controller
          name: etc-adc
          readOnly: true
        - mountPath: /root/.kube/config
          name: etc-master
          subPath: admin.kubeconfig
  hostNetwork: true
  priorityClassName: system-node-critical
  volumes:
    - hostPath:
        path: /etc/aro-admission-controller
      name: etc-adc
    - hostPath:
        path: /etc/origin/master
      name: etc-master
